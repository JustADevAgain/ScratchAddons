<template>
  <div class="loading" v-show="!error && (projects.length === 0 || projects.length !== projectsChecked)">
    {{ loadingMsg }}
  </div>
  <div class="loading" v-show="error">
    {{ errorMessage }}
    <span v-if="error !== 'server-error'">{{{ settingsHTML() }}}</span>
  </div>
  <div class="games-container" v-show="loaded">
    <div class="games" v-for="project of projectsSorted">
      <div class="title">
        <a class="project-name nolink" :href="'https://scratch.mit.edu/projects/' + project.id" target="_blank"
          >{{ project.title }}</a
        >
        <span class="float-right"><img class="small-icon" src="../../images/icons/users.svg" /> {{ project.amt }}</span>
      </div>
      <div class="project-details" v-show="true || project.amt > 0 && project.extended">
        <div class="username-list">
          <a
            v-for="user of project.users"
            :href="'https://scratch.mit.edu/users/' + user"
            target="_blank"
            class="nolink"
            >{{ user }}</a
          >
        </div>
        <div class="username-list" v-show="project.amt === 0">{{ messages.noUsersMsg }}</div>
      </div>
    </div>
  </div>
</template>

<style>
  .loading {
    text-align: center;
    font-size: 1rem;
    padding-top: 10px;
    font-weight: 600;
    margin: 0 2rem;
  }

  .title {
    font-size: 12px;
    color: var(--content-text);
    padding: 6px 8px;
    cursor: default;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--content-border);
    user-select: none;
  }

  .project-name {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin-inline-end: auto;
  }
  .float-right {
    white-space: nowrap;
    font-size: 12px;
  }

  .project-details {
    padding: 8px;
    font-size: 12px;
  }
  .username-list > a {
    display: inline-block;
    margin-inline-end: 10px;
    color: var(--blue-text);
  }

  .games-container {
    padding-block: 1px;
  }
  .games {
    border-radius: 4px;
    border: 1px solid var(--content-border);
    background: var(--content-background);
    margin: 10px;
    box-shadow: var(--content-shadow);
  }

  .title a {
    color: var(--content-text);
  }

  .small-icon {
    height: 14px;
    vertical-align: text-bottom;
    filter: var(--content-icon-filter);
  }
</style>
